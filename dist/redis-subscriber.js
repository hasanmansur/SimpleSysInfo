var redis=require("redis"),subscriber=redis.createClient(),WebSocket=require("ws"),ws;subscriber.on("ready",function(){console.log("subscriber is ready")}),subscriber.on("connect",function(){console.log("subscriber is connected to redis server")}),subscriber.on("error",function(e){console.log("error: subscriber connecting redis server")}),subscriber.on("reconnecting",function(e){console.log("trying to reconnect to redis server ... Attempt#"+e.attempt+", Delay: "+e.delay+"ms")}),subscriber.on("end",function(){console.log("redis server connection has closed")}),subscriber.on("subscribe",function(e,o){console.log("subscribes to channel: "+e),console.log("total channel subscription: "+o)}),subscriber.on("message",function(e,o){console.log("-----------------------------------------------"),console.log(o),console.log("-----------------------------------------------");try{ws.send(o)}catch(s){console.log("failed to send data to ws server - "+s),connect()}}),subscriber.subscribe("test_channel");var connect=function(){console.log("subscriber trying to connect to ws server ... "),ws=new WebSocket("ws://localhost:8080"),ws.on("error",function(e){console.log("error: subscriber connecting ws server")}),ws.on("open",function(){console.log("subscriber - ws server connection open")}),ws.on("close",function(e,o){console.log("subscriber - ws server connection closed with code:"+e)})};connect();